# Setup {.unnumbered}

## How to set up R

The tutorials rely on {{< fa brands r-project >}}, so you need to have it [installed](https://cran.r-project.org/) on your computer with, ideally, an Integrated Development Environment (IDE) such as [RStudio](https://posit.co/downloads/), [Visual Studio Code](https://code.visualstudio.com/download) or [Positron](https://posit.co/products/ide/positron/).   

Please have a look at the tutorial on how to setup a working environment for scientific computing with {{< fa brands r-project >}}:
<https://frbcesab.github.io/rsetup/>


### R packages needed  

We will use four packages: `terra`[@R-terra] and `sf`[@R-sf] for handling spatial data, `mapview`[@R-mapview] for interactive maps, and `here`[@R-here] for locating files locally. Make sure these four packages are installed locally by running the following script:  

```{r}
#| eval: false
#| label: install packages
needed_packages <- c("terra", "sf", "mapview", "here")

check_and_install <- function(x) {
  if (!requireNamespace(x, quietly = TRUE)) {
    install.packages(x)
  }
}

invisible(lapply(needed_packages, check_and_install))
```

## Download toy dataset

As a toy dataset, the tutorials rely on observed occurrences of otters in 2021 around Montpellier, France. These datasets were downloaded directly from {{< fa brands r-project >}}, for more details see the [tutorial on creating a toy dataset from GBIF, IGN and CHELSA](https://frbcesab.github.io/spatial-r/chapters/31_toydata_mpl.html).

You can run the following commands to download the dataset needed for the workshop (total size : 11Mb), or download [a zip archive](https://github.com/FRBCesab/spatial-r/raw/refs/heads/main/data/spatial-r_data.zip)

```{r}
#| eval: false
# set data directory
datadir <- here::here("data")
if (!dir.exists(datadir)) {
  dir.create(
    path = datadir,
    showWarnings = FALSE,
    recursive = TRUE
  )
}

# download base url
url_git <- "https://github.com/FRBCesab/spatial-r/raw/refs/heads/main/data"

# download GBIF data as csv file (14kb)
file1 <- "gbif_otter_2021_mpl50km.csv"
download.file(file.path(url_git, file1), file.path(datadir, file1), mode = "wb")

# download GBIF data as geopackage file (124kb)
file2 <- "gbif_otter_2021_mpl50km.gpkg"
download.file(file.path(url_git, file2), file.path(datadir, file2), mode = "wb")

# download rivers (2.5Mb)
file3 <- "BDCARTO-River_mpl50km.gpkg"
download.file(file.path(url_git, file3), file.path(datadir, file3), mode = "wb")

# download land cover (4.7Mb)
file4 <- "BDCARTO-LULC_mpl50km"
shpext <- c("dbf", "prj", "shp", "shx")
url_shp <- file.path(url_git, paste(file4, shpext, sep = "."))
dir_shp <- file.path(datadir, paste(file4, shpext, sep = "."))
for (i in seq_along(shpext)) {
  download.file(url_shp[i], dir_shp[i], mode = "wb")
}

# download elevation data (505kb)
file5 <- "BDALTI_mpl50km.tif"
download.file(file.path(url_git, file5), file.path(datadir, file5), mode = "wb")

# download CHELSA monthly temperature (2.2Mb)
file6 <- "CHELSA_monthly_tas_2015_2021.tif"
download.file(file.path(url_git, file6), file.path(datadir, file6), mode = "wb")

# download GADM France country borders  (904 kb)
file7 <- "gadm41_FRA_0_pk.rds"
download.file(file.path(url_git, file7), file.path(datadir, file7), mode = "wb")
```



## Session information

For reproducibility, the tutorials were last compiled on ```r format(Sys.Date(), "%d %B %Y")``` with the following libraries:  

```{r session}
#| echo: false

suppressPackageStartupMessages({
  library(mapview)
  library(here)
  library(terra)
  library(sf)
})

print(sessionInfo(), locale = FALSE, tzone = FALSE)
# R version 4.5.1 (2025-06-13)
# terra_1.8-70
# sf_1.0-21
# here_1.0.2
# mapview_2.11.4
```
